运用**括号序**将树上路径问题转化为区间问题，从而可以采用莫队求解

括号序 : 对于每个节点 , 有两个时间戳的值 $st$ 和 $ed$ 分别表示 $dfs$ 过程中记录第一次(进入)该节点时的时间戳和第二次(离开)该节点的时间戳

对于从 $u$ 到 $v$ 的路径 , 我们不妨假设 $u$ 为深度较低的点 , 先求出它们的 $lca$ , 然后分两种情况讨论 : 

- $u$ $=$ $lca$ 那么区间的 $l$ 和 $r$ 分别为 $st[u]$ 和 $st[v]$
- $v$ $=$ $lca$ 那么区间的 $l$ 和 $r$ 分别为 $ed[u]$ 和 $st[v]$ , 同时需要额外记录 $lca$ 这个点 , 在区间移动完之后要加上 $lca$ 才能正确计算出答案 , 然后 , 应该立即删除 $lca$ 避免其对后续区间产生影响

我们将区间中只出现 $1$ 次的点计入答案 , 而 $2$ 次的点认为相互抵消

因此 , 在树上莫队 , 我们不再采用 $add$ 和 $dec$ 两个办法而是统一采用 $change$ 办法 , 另外记录每个点是否被标记过 , 如果已经标记过那么直接删除 , 如果未被标记过那么直接增加即可

如果操作带有修改 , 那么就按照带修莫队的方法多增加一维时间 $T$ 进行和带修莫队一样的修改操作即可

总体时间复杂度 : 实际上 N = $2$ $\times$ $n$ 因为括号序每个点拥有两个 然后时间复杂度就取决于转化后是普通莫队还是带修莫队了
